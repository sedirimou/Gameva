generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model Product {
  kinguinid                    Int?
  productid                    String?                  @unique(map: "products_product_id_unique")
  cheapestofferid              String?
  name                         String?
  originalname                 String?
  description                  String?
  developers                   String[]
  publishers                   String[]
  genres                       String[]
  platform                     String?
  releasedate                  String?
  qty                          Int?
  kinguin_price                Float?                   @db.Real
  textqty                      Int?
  offerscount                  Int?
  totalqty                     Int?
  ispreorder                   Boolean?
  metacriticscore              Float?                   @db.Real
  regionallimitations          String?
  countrylimitation            String[]
  regionid                     Int?
  activationdetails            String?
  languages                    String[]
  updatedat                    String?
  tags                         String[]
  merchantname                 String[]
  agerating                    String?
  steam                        String?
  images_screenshots           Json[]
  images_screenshots_url       String?
  images_screenshots_thumbnail String?
  images_cover                 Json[]
  images_cover_url             String?
  images_cover_thumbnail       String?
  id                           Int                      @id @default(autoincrement())
  offers                       Json?
  videos                       Json?
  systemrequirements           Json?
  images                       Json?
  commission_tier_id           Int?
  price                        Decimal?                 @db.Decimal(10, 2)
  slug                         String?                  @db.VarChar(255)
  sale_price                   Decimal?                 @db.Decimal(10, 2)
  limit_per_basket             Int?
  ean                          String?                  @db.VarChar(50)
  sku                          String?                  @db.VarChar(50)
  automater_id                 Int?
  meta_title                   String?
  meta_description             String?
  meta_keywords                String?
  og_title                     String?
  og_description               String?
  og_image_url                 String?
  shipping_time_value          String?                  @default("0") @db.VarChar(10)
  shipping_time_unit           String?                  @default("Instant Delivery") @db.VarChar(50)
  categoryPopular              CategoryPopularProduct[]
  categories                   ProductCategory[]
  developers_rel               ProductDeveloper[]
  productGenres                ProductGenre[]
  languages_rel                ProductLanguage[]
  platforms                    ProductPlatform[]
  publishers_rel               ProductPublisher[]
  regions                      ProductRegion[]
  types                        ProductType[]
  commissionTier               KinguinCommissionTier?   @relation(fields: [commission_tier_id], references: [id], onUpdate: NoAction, map: "fk_commission_tier")
  shipping                     Shipping?

  @@index([genres], map: "idx_products_genres_gin", type: Gin)
  @@index([languages], map: "idx_products_languages_gin", type: Gin)
  @@index([platform], map: "idx_products_platform")
  @@index([price], map: "idx_products_price")
  @@index([slug], map: "idx_products_slug")
  @@index([tags], map: "idx_products_tags_gin", type: Gin)
  @@map("products")
}

model Category {
  id                     Int                      @id @default(autoincrement())
  name                   String                   @db.VarChar(255)
  slug                   String                   @unique @db.VarChar(255)
  parent_id              Int?
  icon                   String?
  banner                 String?
  description            String?
  sub_description        String?
  link                   String?
  order_position         Int?                     @default(0)
  status                 String?                  @default("active") @db.VarChar(50)
  show_in_main_menu      Boolean?                 @default(true)
  created_at             DateTime?                @default(now()) @db.Timestamp(6)
  updated_at             DateTime?                @default(now()) @updatedAt @db.Timestamp(6)
  category_image         String?
  display_type           String?                  @default("products") @db.VarChar(20)
  main_menu_description  String?
  main_menu_display_type String?                  @default("products") @db.VarChar(20)
  parent                 Category?                @relation("CategoryHierarchy", fields: [parent_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  children               Category[]               @relation("CategoryHierarchy")
  popularProducts        CategoryPopularProduct[]
  main_menu_items        main_menu_items[]
  products               ProductCategory[]
  product_category_notes product_category_notes[]

  @@map("categories")
}

model User {
  id                 Int             @id @default(autoincrement())
  email              String          @unique @db.VarChar(255)
  username           String?         @unique @db.VarChar(100)
  password_hash      String?         @db.VarChar(255)
  first_name         String?         @db.VarChar(100)
  last_name          String?         @db.VarChar(100)
  created_at         DateTime?       @default(now()) @db.Timestamp(6)
  updated_at         DateTime?       @default(now()) @updatedAt @db.Timestamp(6)
  discord_id         String?         @unique @db.VarChar(255)
  avatar_url         String?
  google_id          String?         @unique @db.VarChar(50)
  is_active          Boolean?        @default(true)
  role               String?         @default("user") @db.VarChar(50)
  email_verified     Boolean?        @default(false)
  last_login         DateTime?       @db.Timestamp(6)
  steam_id           String?         @unique @db.VarChar(255)
  steam_username     String?         @db.VarChar(255)
  steam_avatar       String?
  auth_provider      String?         @default("local") @db.VarChar(50)
  discord_username   String?         @db.VarChar(255)
  discord_avatar     String?
  google_email       String?         @db.VarChar(255)
  google_avatar      String?
  reset_token        String?         @db.VarChar(255)
  reset_token_expiry DateTime?       @db.Timestamp(6)
  preferred_language String?         @default("English US") @db.VarChar(50)
  preferred_currency String?         @default("EUR") @db.VarChar(10)
  cartItems          CartItem[]
  search_history     SearchHistory[]
  sessions           UserSession[]
  wishlistItems      Wishlist[]

  @@map("users")
}

model ProductCategory {
  id          Int       @id @default(autoincrement())
  product_id  Int
  category_id Int
  created_at  DateTime? @default(now()) @db.Timestamp(6)
  category    Category  @relation(fields: [category_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  product     Product   @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([product_id, category_id])
  @@index([category_id], map: "idx_product_categories_category_id")
  @@index([product_id], map: "idx_product_categories_product_id")
  @@map("product_categories")
}

model ProductPlatform {
  id          Int       @id @default(autoincrement())
  product_id  Int?
  platform_id Int?
  platform    Platform? @relation(fields: [platform_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  product     Product?  @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([product_id, platform_id])
  @@map("product_platforms")
}

model ProductGenre {
  id         Int      @id @default(autoincrement())
  product_id Int?
  genre_id   Int?
  genre      Genre?   @relation(fields: [genre_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  product    Product? @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([product_id, genre_id])
  @@map("product_genres")
}

model ProductDeveloper {
  id           Int        @id @default(autoincrement())
  product_id   Int?
  developer_id Int?
  developer    Developer? @relation(fields: [developer_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  product      Product?   @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([product_id, developer_id])
  @@map("product_developers")
}

model ProductPublisher {
  id           Int        @id @default(autoincrement())
  product_id   Int?
  publisher_id Int?
  product      Product?   @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  publisher    Publisher? @relation(fields: [publisher_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([product_id, publisher_id])
  @@map("product_publishers")
}

model ProductLanguage {
  id          Int       @id @default(autoincrement())
  product_id  Int?
  language_id Int?
  language    Language? @relation(fields: [language_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  product     Product?  @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([product_id, language_id])
  @@map("product_languages")
}

model ProductRegion {
  id         Int      @id @default(autoincrement())
  product_id Int?
  region_id  Int?
  product    Product? @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  region     Region?  @relation(fields: [region_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([product_id, region_id])
  @@map("product_regions")
}

model ProductType {
  id         Int       @id @default(autoincrement())
  product_id Int
  type_id    Int
  created_at DateTime? @default(now()) @db.Timestamp(6)
  product    Product   @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  type       Type      @relation(fields: [type_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([product_id, type_id])
  @@map("product_types")
}

model Platform {
  id          Int               @id @default(autoincrement())
  title       String            @db.VarChar(255)
  icon_url    String?
  description String?
  created_at  DateTime?         @default(now()) @db.Timestamp(6)
  updated_at  DateTime?         @default(now()) @db.Timestamp(6)
  is_featured Boolean?          @default(false)
  products    ProductPlatform[]

  @@map("platforms")
}

model Genre {
  id          Int            @id @default(autoincrement())
  name        String         @unique @db.VarChar(255)
  created_at  DateTime?      @default(now()) @db.Timestamp(6)
  icon_url    String?
  description String?
  is_featured Boolean?       @default(false)
  products    ProductGenre[]

  @@map("genres")
}

model Developer {
  id         Int                @id @default(autoincrement())
  name       String             @unique @db.VarChar(255)
  created_at DateTime?          @default(now()) @db.Timestamp(6)
  products   ProductDeveloper[]

  @@map("developers")
}

model Publisher {
  id           Int                @id @default(autoincrement())
  name         String             @unique @db.VarChar(255)
  created_at   DateTime?          @default(now()) @db.Timestamp(6)
  company_link String?
  products     ProductPublisher[]

  @@map("publishers")
}

model Language {
  id          Int               @id @default(autoincrement())
  name        String            @unique @db.VarChar(255)
  created_at  DateTime?         @default(now()) @db.Timestamp(6)
  description String?
  products    ProductLanguage[]

  @@map("languages")
}

model Region {
  id          Int             @id @default(autoincrement())
  name        String          @unique @db.VarChar(255)
  created_at  DateTime?       @default(now()) @db.Timestamp(6)
  description String?
  products    ProductRegion[]

  @@map("regions")
}

model Type {
  id                Int           @id @default(autoincrement())
  name              String        @unique @db.VarChar(255)
  slug              String        @unique @db.VarChar(255)
  description       String?
  icon              String?       @db.VarChar(255)
  banner            String?       @db.VarChar(255)
  parent_id         Int?
  order_position    Int?          @default(0)
  status            String?       @default("true") @db.VarChar(20)
  show_in_main_menu Boolean?      @default(false)
  created_at        DateTime?     @default(now()) @db.Timestamp(6)
  updated_at        DateTime?     @default(now()) @db.Timestamp(6)
  products          ProductType[]
  types             Type?         @relation("typesTotypes", fields: [parent_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  other_types       Type[]        @relation("typesTotypes")

  @@map("types")
}

model AgeRating {
  id              Int       @id @default(autoincrement())
  title           String    @db.VarChar(255)
  secondary_title String?   @db.VarChar(255)
  description     String?
  icon_url        String?
  created_at      DateTime? @default(now()) @db.Timestamp(6)
  updated_at      DateTime? @default(now()) @db.Timestamp(6)

  @@map("age_ratings")
}

model Tag {
  id         Int       @id @default(autoincrement())
  name       String    @unique @db.VarChar(255)
  created_at DateTime? @default(now()) @db.Timestamp(6)

  @@map("tags")
}

model CartItem {
  id         Int       @id @default(autoincrement())
  user_id    Int
  product_id Int
  quantity   Int?      @default(1)
  created_at DateTime? @default(now()) @db.Timestamp(6)
  updated_at DateTime? @default(now()) @updatedAt @db.Timestamp(6)
  user       User      @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_user")

  @@unique([user_id, product_id], map: "cart_items_user_product_unique")
  @@index([user_id, product_id], map: "idx_cart_items_user_product")
  @@map("cart_items")
}

model Wishlist {
  id         Int       @id @default(autoincrement())
  user_id    Int?
  session_id String?   @db.VarChar(255)
  product_id Int
  created_at DateTime? @default(now()) @db.Timestamp(6)
  user       User?     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@map("wishlist")
}

model Shipping {
  id                  Int       @id @default(autoincrement())
  product_id          Int       @unique
  shipping_time_value Int?
  shipping_time_unit  String?
  created_at          DateTime? @default(now()) @db.Timestamp(6)
  updated_at          DateTime? @default(now()) @updatedAt @db.Timestamp(6)
  product             Product   @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@map("shipping")
}

model KinguinCommissionTier {
  id         Int       @id @default(autoincrement())
  min_price  Decimal   @db.Decimal(10, 2)
  max_price  Decimal   @db.Decimal(10, 2)
  type       String
  rate       Decimal   @db.Decimal(10, 2)
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  products   Product[]

  @@map("kinguin_commission_tiers")
}

model UserSession {
  id         Int       @id @default(autoincrement())
  session_id String    @unique @db.VarChar(255)
  user_id    Int?
  ip_address String?   @db.Inet
  user_agent String?
  expires_at DateTime  @db.Timestamp(6)
  created_at DateTime? @default(now()) @db.Timestamp(6)
  user       User?     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([expires_at], map: "idx_user_sessions_expires_at")
  @@index([session_id], map: "idx_user_sessions_session_id")
  @@index([user_id], map: "idx_user_sessions_user_id")
  @@map("user_sessions")
}

model SearchHistory {
  id            Int       @id @default(autoincrement())
  user_id       Int?
  session_id    String?   @db.VarChar(255)
  keyword       String    @db.VarChar(255)
  searched_at   DateTime? @default(now()) @db.Timestamp(6)
  search_count  Int?      @default(1)
  last_searched DateTime? @default(now()) @db.Timestamp(6)
  users         User?     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([session_id, keyword], map: "unique_session_keyword")
  @@unique([user_id, keyword], map: "unique_user_keyword")
  @@index([session_id, searched_at(sort: Desc)], map: "idx_search_history_session")
  @@index([user_id, searched_at(sort: Desc)], map: "idx_search_history_user")
  @@map("search_history")
}

model CategoryPopularProduct {
  id            Int       @id @default(autoincrement())
  category_id   Int
  product_id    Int
  display_order Int?      @default(0)
  created_at    DateTime? @default(now()) @db.Timestamp(6)
  category      Category  @relation(fields: [category_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  product       Product   @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([category_id, product_id])
  @@map("category_popular_products")
}

model SpecialPage {
  id                        Int       @id @default(autoincrement())
  slug                      String    @unique @db.VarChar(255)
  title                     String    @db.VarChar(255)
  motivation_title          String?   @db.VarChar(255)
  top_banner                String?
  bottom_description        String?
  icon_color                String?   @default("#ffffff") @db.VarChar(50)
  icon_size                 Int?      @default(24)
  icon_quantity             Int?      @default(6)
  icon_list                 String?
  icon_placement_type       String?   @default("random") @db.VarChar(20)
  add_to_header_menu        Boolean?  @default(false)
  header_button_title       String?   @db.VarChar(255)
  background_color          String?   @default("#153e8f") @db.VarChar(50)
  selected_categories       String?
  created_at                DateTime? @default(now()) @db.Timestamp(6)
  updated_at                DateTime? @default(now()) @updatedAt @db.Timestamp(6)
  banner_opacity            Int?      @default(100)
  banner_height             Int?      @default(300)
  bottom_description_width  Int?      @default(1400)
  page_max_width            Int?      @default(1400)
  title_font_size           Int?      @default(48)
  motivation_font_size      Int?      @default(20)
  icon_distribution_pattern String?   @default("random") @db.VarChar(50)
  icon_opacity              Int?      @default(20)
  icon_height               Int?      @default(48)
  icon_grid_rows            Int?      @default(5)
  icon_grid_columns         Int?      @default(5)
  meta_title                String?   @db.VarChar(255)
  meta_description          String?
  meta_keywords             String?
  sort_order                Int?      @default(0)
  description               String?

  @@map("special_pages")
}

model EmailTemplate {
  id            Int       @id @default(autoincrement())
  template_key  String    @unique @db.VarChar(100)
  template_name String    @db.VarChar(255)
  description   String
  category      String    @db.VarChar(50)
  subject       String    @db.VarChar(500)
  content       String
  is_enabled    Boolean?  @default(true)
  is_html       Boolean?  @default(true)
  created_at    DateTime? @default(now()) @db.Timestamp(6)
  updated_at    DateTime? @default(now()) @updatedAt @db.Timestamp(6)

  @@map("email_templates")
}

model ContactFormSettings {
  id            Int       @id @default(autoincrement())
  settings_json Json
  created_at    DateTime? @default(now()) @db.Timestamp(6)
  updated_at    DateTime? @default(now()) @updatedAt @db.Timestamp(6)

  @@map("contact_form_settings")
}

model ContactSubmission {
  id              Int       @id @default(autoincrement())
  name            String    @db.VarChar(255)
  email           String    @db.VarChar(255)
  subject         String    @db.VarChar(255)
  message         String
  screenshot_path String?   @db.VarChar(500)
  status          String?   @default("new") @db.VarChar(50)
  admin_notes     String?
  responded_at    DateTime? @db.Timestamp(6)
  created_at      DateTime? @default(now()) @db.Timestamp(6)
  updated_at      DateTime? @default(now()) @updatedAt @db.Timestamp(6)
  order_number    String?   @db.VarChar(100)

  @@index([created_at(sort: Desc)], map: "idx_contact_submissions_created_at")
  @@index([email], map: "idx_contact_submissions_email")
  @@index([status], map: "idx_contact_submissions_status")
  @@map("contact_submissions")
}

model CookieConsentSettings {
  id                            Int       @id @default(autoincrement())
  banner_title                  String?   @default("We use cookies") @db.VarChar(255)
  banner_description            String?   @default("This website uses essential cookies to ensure its proper operation and tracking cookies to understand how you interact with it.")
  accept_all_text               String?   @default("Accept all") @db.VarChar(100)
  accept_necessary_text         String?   @default("Accept only essential") @db.VarChar(100)
  settings_text                 String?   @default("Preferences") @db.VarChar(100)
  close_text                    String?   @default("Close") @db.VarChar(100)
  position                      String?   @default("bottom") @db.VarChar(20)
  layout                        String?   @default("box") @db.VarChar(20)
  transition                    String?   @default("slide") @db.VarChar(20)
  theme_color                   String?   @default("#153e8f") @db.VarChar(50)
  button_color                  String?   @default("#29adb2") @db.VarChar(50)
  is_enabled                    Boolean?  @default(true)
  created_at                    DateTime? @default(now()) @db.Timestamp(6)
  updated_at                    DateTime? @default(now()) @updatedAt @db.Timestamp(6)
  essential_cookies_description String?   @default("Required for the website to function properly. These cookies enable core functionality such as security, network management, and accessibility.")
  analytics_cookies_description String?   @default("Help us understand how visitors interact with our website by collecting and reporting information anonymously.")
  marketing_cookies_description String?   @default("Used to deliver personalized advertisements and track the effectiveness of advertising campaigns.")

  @@map("cookie_consent_settings")
}

model HelpCategory {
  id           Int           @id @default(autoincrement())
  name         String        @db.VarChar(255)
  slug         String        @unique @db.VarChar(255)
  description  String?
  icon         String?       @db.VarChar(255)
  sort_order   Int?          @default(0)
  is_active    Boolean?      @default(true)
  created_at   DateTime?     @default(now()) @db.Timestamp(6)
  updated_at   DateTime?     @default(now()) @updatedAt @db.Timestamp(6)
  articles     HelpArticle[]
  faqs         HelpFaq[]
  help_tickets HelpTicket[]

  @@index([is_active, sort_order], map: "idx_help_categories_active")
  @@map("help_categories")
}

model HelpArticle {
  id                Int           @id @default(autoincrement())
  category_id       Int?
  title             String        @db.VarChar(500)
  slug              String        @unique @db.VarChar(500)
  content           String
  excerpt           String?
  featured_image    String?       @db.VarChar(500)
  sort_order        Int?          @default(0)
  is_active         Boolean?      @default(true)
  is_featured       Boolean?      @default(false)
  view_count        Int?          @default(0)
  helpful_count     Int?          @default(0)
  not_helpful_count Int?          @default(0)
  created_at        DateTime?     @default(now()) @db.Timestamp(6)
  updated_at        DateTime?     @default(now()) @updatedAt @db.Timestamp(6)
  category          HelpCategory? @relation(fields: [category_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([is_active], map: "idx_help_articles_active")
  @@index([category_id], map: "idx_help_articles_category")
  @@index([category_id, is_active], map: "idx_help_articles_category_active")
  @@map("help_articles")
}

model HelpFaq {
  id                Int           @id @default(autoincrement())
  category_id       Int?
  question          String
  answer            String
  sort_order        Int?          @default(0)
  is_active         Boolean?      @default(true)
  view_count        Int?          @default(0)
  helpful_count     Int?          @default(0)
  not_helpful_count Int?          @default(0)
  created_at        DateTime?     @default(now()) @db.Timestamp(6)
  updated_at        DateTime?     @default(now()) @updatedAt @db.Timestamp(6)
  category          HelpCategory? @relation(fields: [category_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([is_active], map: "idx_help_faqs_active")
  @@index([category_id], map: "idx_help_faqs_category")
  @@index([category_id, is_active], map: "idx_help_faqs_category_active")
  @@map("help_faqs")
}

model HelpTicket {
  id               Int                  @id @default(autoincrement())
  ticket_number    String               @unique @db.VarChar(50)
  category_id      Int?
  subject          String               @db.VarChar(500)
  description      String
  priority         String?              @default("medium") @db.VarChar(20)
  status           String?              @default("open") @db.VarChar(20)
  customer_name    String?              @db.VarChar(255)
  customer_email   String?              @db.VarChar(255)
  customer_phone   String?              @db.VarChar(50)
  assigned_to      String?              @db.VarChar(255)
  resolution_notes String?
  created_at       DateTime?            @default(now()) @db.Timestamp(6)
  updated_at       DateTime?            @default(now()) @updatedAt @db.Timestamp(6)
  resolved_at      DateTime?            @db.Timestamp(6)
  responses        HelpTicketResponse[]
  help_categories  HelpCategory?        @relation(fields: [category_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([created_at], map: "idx_help_tickets_created")
  @@index([customer_email], map: "idx_help_tickets_customer")
  @@index([priority], map: "idx_help_tickets_priority")
  @@index([status], map: "idx_help_tickets_status")
  @@map("help_tickets")
}

model HelpTicketResponse {
  id               Int         @id @default(autoincrement())
  ticket_id        Int?
  message          String
  is_from_customer Boolean?    @default(true)
  responder_name   String?     @db.VarChar(255)
  responder_email  String?     @db.VarChar(255)
  created_at       DateTime?   @default(now()) @db.Timestamp(6)
  ticket           HelpTicket? @relation(fields: [ticket_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@map("help_ticket_responses")
}

model HelpContactInfo {
  id          Int       @id @default(autoincrement())
  department  String    @db.VarChar(255)
  email       String?   @db.VarChar(255)
  phone       String?   @db.VarChar(50)
  hours       String?   @db.VarChar(500)
  description String?
  sort_order  Int?      @default(0)
  is_active   Boolean?  @default(true)
  created_at  DateTime? @default(now()) @db.Timestamp(6)
  updated_at  DateTime? @default(now()) @updatedAt @db.Timestamp(6)

  @@index([is_active], map: "idx_help_contact_active")
  @@map("help_contact_info")
}

model HelpSettings {
  id                    Int       @id @default(autoincrement())
  help_center_title     String?   @default("Help Center") @db.VarChar(255)
  help_center_subtitle  String?   @default("Find answers to common questions and get support")
  support_email         String?   @db.VarChar(255)
  support_phone         String?   @db.VarChar(50)
  business_hours        String?   @db.VarChar(255)
  response_time         String?   @db.VarChar(255)
  auto_response_message String?
  is_active             Boolean?  @default(true)
  created_at            DateTime? @default(now()) @db.Timestamp(6)
  updated_at            DateTime? @default(now()) @updatedAt @db.Timestamp(6)

  @@map("help_settings")
}

model hero_sections {
  id           Int       @id @default(autoincrement())
  title        String    @db.VarChar(255)
  image        String    @db.VarChar(500)
  button_label String    @db.VarChar(100)
  link         String    @db.VarChar(500)
  position     Int       @default(0)
  is_active    Boolean   @default(true)
  created_at   DateTime? @default(now()) @db.Timestamp(6)
  updated_at   DateTime? @default(now()) @db.Timestamp(6)
}

model home_section_products {
  id            Int            @id @default(autoincrement())
  section_id    Int?
  product_id    Int
  order_index   Int?           @default(0)
  created_at    DateTime?      @default(now()) @db.Timestamp(6)
  home_sections home_sections? @relation(fields: [section_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model home_sections {
  id                    Int                     @id @default(autoincrement())
  title                 String                  @db.VarChar(255)
  position              Int                     @default(0)
  is_visible            Boolean?                @default(true)
  created_at            DateTime?               @default(now()) @db.Timestamp(6)
  updated_at            DateTime?               @default(now()) @db.Timestamp(6)
  home_section_products home_section_products[]
}

model icon_grid_sections {
  id            Int       @id @default(autoincrement())
  icon_path     String    @db.VarChar(255)
  title         String?   @db.VarChar(100)
  subtitle      String?   @db.VarChar(100)
  redirect_link String?   @db.VarChar(255)
  position      Int?      @default(1)
  is_active     Boolean?  @default(true)
  created_at    DateTime? @default(now()) @db.Timestamp(6)
  updated_at    DateTime? @default(now()) @db.Timestamp(6)
  link_target   String?   @default("_self") @db.VarChar(10)
}

model kinguin_import_status {
  id             Int       @id @default(autoincrement())
  total_products Int?      @default(0)
  imported       Int?      @default(0)
  skipped        Int?      @default(0)
  errors         Int?      @default(0)
  current_page   Int?      @default(0)
  status         String?   @default("Idle")
  last_update    DateTime? @default(now()) @db.Timestamptz(6)
}

model kinguin_settings {
  id            Int       @id @default(autoincrement())
  api_key       String
  api_url       String
  platforms     Json?     @default("[]")
  genres        Json?     @default("[]")
  tags          Json?     @default("[]")
  minimum_price Decimal?  @default(0) @db.Decimal(10, 2)
  auto_update   Boolean?  @default(false)
  created_at    DateTime? @default(now()) @db.Timestamptz(6)
  updated_at    DateTime? @default(now()) @db.Timestamptz(6)
}

model main_menu_items {
  id                     Int               @id @default(autoincrement())
  name                   String            @db.VarChar(255)
  slug                   String            @unique @db.VarChar(255)
  category_id            Int?
  parent_id              Int?
  display_order          Int?              @default(0)
  icon_url               String?
  description            String?
  is_active              Boolean?          @default(true)
  show_product_count     Boolean?          @default(true)
  created_at             DateTime?         @default(now()) @db.Timestamp(6)
  updated_at             DateTime?         @default(now()) @db.Timestamp(6)
  category_image         String?
  banner_images          Json?             @default("[\"\", \"\", \"\", \"\"]")
  main_menu_display_type String?           @default("carousel") @db.VarChar(20)
  popular_product_ids    Int[]
  categories             Category?         @relation(fields: [category_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  main_menu_items        main_menu_items?  @relation("main_menu_itemsTomain_menu_items", fields: [parent_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  other_main_menu_items  main_menu_items[] @relation("main_menu_itemsTomain_menu_items")

  @@index([category_id], map: "idx_main_menu_items_category_id")
  @@index([parent_id], map: "idx_main_menu_items_parent_id")
  @@index([slug], map: "idx_main_menu_items_slug")
}

model operating_systems {
  id          Int       @id @default(autoincrement())
  name        String    @unique @db.VarChar(100)
  slug        String    @unique @db.VarChar(100)
  description String?
  created_at  DateTime? @default(now()) @db.Timestamp(6)
}

model orders {
  id                       Int       @id @default(autoincrement())
  order_id                 String    @unique @db.VarChar(255)
  stripe_payment_intent_id String?   @unique @db.VarChar(255)
  customer_email           String    @db.VarChar(255)
  customer_name            String    @db.VarChar(255)
  customer_address         Json?
  items                    Json
  subtotal                 Decimal   @db.Decimal(10, 2)
  tax                      Decimal   @default(0) @db.Decimal(10, 2)
  total                    Decimal   @db.Decimal(10, 2)
  currency                 String?   @default("EUR") @db.VarChar(3)
  status                   String?   @default("pending") @db.VarChar(50)
  payment_status           String?   @default("pending") @db.VarChar(50)
  created_at               DateTime? @default(now()) @db.Timestamp(6)
  updated_at               DateTime? @default(now()) @db.Timestamp(6)
  paid_at                  DateTime? @db.Timestamp(6)
  fulfilled_at             DateTime? @db.Timestamp(6)

  @@index([customer_email], map: "idx_orders_customer_email")
  @@index([order_id], map: "idx_orders_order_id")
  @@index([payment_status], map: "idx_orders_payment_status")
  @@index([status], map: "idx_orders_status")
  @@index([stripe_payment_intent_id], map: "idx_orders_stripe_payment_intent_id")
}

model page_categories {
  id          Int       @id @default(autoincrement())
  name        String    @db.VarChar(255)
  slug        String    @unique @db.VarChar(255)
  created_at  DateTime? @default(now()) @db.Timestamp(6)
  updated_at  DateTime? @default(now()) @db.Timestamp(6)
  description String?
  sort_order  Int?      @default(0)
  pages       pages[]

  @@index([slug], map: "idx_page_categories_slug")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model pages {
  id               Int              @id @default(autoincrement())
  title            String           @db.VarChar(255)
  slug             String           @unique @db.VarChar(255)
  type             String           @db.VarChar(20)
  content_json     Json?            @db.Json
  html_content     String?
  page_category_id Int?
  created_at       DateTime?        @default(now()) @db.Timestamp(6)
  updated_at       DateTime?        @default(now()) @db.Timestamp(6)
  meta_title       String?          @db.VarChar(255)
  meta_description String?
  is_active        Boolean?         @default(true)
  sort_order       Int?             @default(0)
  page_categories  page_categories? @relation(fields: [page_category_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([is_active], map: "idx_pages_active")
  @@index([page_category_id], map: "idx_pages_category")
  @@index([slug], map: "idx_pages_slug")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model plugin_settings {
  id            Int       @id @default(autoincrement())
  plugin_name   String    @db.VarChar(100)
  setting_key   String    @db.VarChar(200)
  setting_value String?
  status        String?   @default("inactive") @db.VarChar(20)
  mode          String?   @db.VarChar(20)
  created_at    DateTime? @default(now()) @db.Timestamp(6)
  updated_at    DateTime? @default(now()) @db.Timestamp(6)

  @@unique([plugin_name, setting_key])
}

model product_add_logs {
  id            Int       @id @default(autoincrement())
  timestamp     DateTime? @default(now()) @db.Timestamp(6)
  admin_user_id Int?
  admin_email   String?   @db.VarChar(255)
  ip_address    String?   @db.Inet
  endpoint      String?   @default("/admin/products/add") @db.VarChar(255)
  log_type      String    @db.VarChar(50)
  product_id    Int?
  product_name  String?   @db.VarChar(255)
  payload       Json?
  error_message String?
  stack_trace   String?
  created_at    DateTime? @default(now()) @db.Timestamp(6)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model product_category_notes {
  id           Int       @id @default(autoincrement())
  category_id  Int?
  note         String?
  created_at   DateTime? @default(now()) @db.Timestamp(6)
  updated_at   DateTime? @default(now()) @db.Timestamp(6)
  product_ids  Int[]
  note_type    String?   @default("category") @db.VarChar(20)
  title_1      String?   @db.VarChar(255)
  title_2      String?   @db.VarChar(255)
  category_ids Int[]
  categories   Category? @relation(fields: [category_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_product_category_notes_category")
}
